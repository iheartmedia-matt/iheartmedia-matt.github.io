// Custom JS Application Code

// If using JSLint for syntax debugging, include the following
/*global $, console, alert, App*/

$(function() {
    
	App.init();
        
});

var App = { 

	settings: { 
		name: "iHeartMedia - Brand Central",	
		version: "0.0.1",
	},

	listen: function() { 
		// Application Listeners can be loaded here for easy configuration		
		console.log("Ready and Listening");
	},	

	init: function() {
		// Kick off the listeners
		this.listen();
		// Application has been initalized
		console.log(this.settings.name + "(v" + this.settings.version + ") Started");
        
        resizeInit();
        
        headerNav();
                
        respondText();
        
        navClick();
        
        wowInit();
        
        videoBG();
                
        //insightChart1();
                
        if ( $('html').hasClass('desktop') || $('html').hasClass('tablet') ) {
            swiperDesktopInit();
        } else {
            swiperMobileInit();
        }
        
        watchVBtn();
        
        shuffle();
        
        offerButton();
        
        mapFlip();
        
        modalOverlays();
        
	}

};

function resizeInit() {
    
    $(document).ready(function() {
        //$(window).load(function () {
        //Window Height
        var sH = $(window).height();
        //Nav Bar Height
        var navH = $('#header_outer').outerHeight();
        
        
        //Set Section 1 Height
        $('#section1').css('height', sH + 'px');
        //Set Section 1 Vertical Middle Alignment
        var s1Height = $('#section1 .container').outerHeight();
        var s1H = s1Height / 4;
        $('#section1 .content').css({'padding-top' : s1H + 'px'});
        
        //Set Section 2 Height
        //$('#section2').css('height', (sH-navH) + 'px');
        //Set Section 3 Vertical Middle Alignment
        //var s2Height = $('#section2 .container').outerHeight();
        //var s2H = s2Height / 4;
        //$('#section2 .content').css({'padding-top' : s2H + 'px'});
        
        //Set Section 3 Height
        $('#section3').css('height', (sH-navH) + 'px');
        //Set Section 3 Vertical Middle Alignment
        var s3Height = $('#section3 .container').outerHeight();
        var s3H = s3Height / 4;
        $('#section3 .content').css({'padding-top' : s3H + 'px'});
        
        //Set Section 5 Height
        $('#section5').css('height', (sH-navH) + 'px');
        //Set Section 3 Vertical Middle Alignment
        var s5Height = $('#section5 .container').outerHeight();
        var s5H = s5Height / 4;
        $('#section5 .content').css({'padding-top' : s5H + 'px'});
            //});
                
    });
 
    $(window).resize(function() {
        //Window Height
        var sH = $(window).height();
        //Nav Bar Height
        var navH = $('#header_outer').outerHeight();
        
        
        //Set Section 1 Height
        $('#section1').css('height', sH + 'px');
        //Set Section 1 Vertical Middle Alignment
        var s1Height = $('#section1 .container').outerHeight();
        var s1H = s1Height / 4;
        $('#section1 .content').css({'padding-top' : s1H + 'px'});
        
        //Set Section 2 Height
        //$('#section2').css('height', (sH-navH) + 'px');
        //Set Section 3 Vertical Middle Alignment
        //var s2Height = $('#section2 .container').outerHeight();
        //var s2H = s2Height / 4;
        //$('#section2 .content').css({'padding-top' : s2H + 'px'});
        
        //Set Section 3 Height
        $('#section3').css('height', (sH-navH) + 'px');
        //Set Section 3 Vertical Middle Alignment
        var s3Height = $('#section3 .container').outerHeight();
        var s3H = s3Height / 4;
        $('#section3 .content').css({'padding-top' : s3H + 'px'});
        
    });
    
    console.log('resize init');
    
}

function headerNav() {
        
    $(document).ready(function(e) {
        
        //Mobile nav slide out
        $('.res-nav_click, ul.toggle li a').click(function(){
            $('ul.toggle').slideToggle(600)	
        });	
                
        //Add/Remove .fixed to header
        if ($(window).scrollTop() > 0) {
            $('#header_outer').addClass('fixed');
            //If #section1 not in view pause video
            $('#section1').addClass('pause');
        } else {
            $('#header_outer').removeClass('fixed');
            //If #section1 in view play video
            $('#section1').removeClass('pause');
        }
                
        $(window).bind('scroll', function() {
            
            // Set video instance
            var instance = $("#section1").data("vide");
                                    
            if ($(window).scrollTop() > 0) {
                $('#header_outer').addClass('fixed');  
                
                instance.getVideoObject().pause();
                //console.log('pause');
            } else {
                $('#header_outer').removeClass('fixed');
                
                instance.getVideoObject().play();
                //console.log('play');
            }
            
        });        
        
        //Init .scrollToFixed
        $('#header_outer').scrollToFixed({spacerClass: 'fixedSpacer'});
        //Remove extra div from .scrollToFixed
        $('.fixedSpacer').remove();
        
        var navHeight = $('#header_outer').height();
        $('#nav').css('top' , navHeight);
                
    });
    
    console.log('headerNav init');

}

function respondText() {

    function resizeText() {
        var preferredWidth = 767;
        var displayWidth = window.innerWidth;
        var percentage = displayWidth / preferredWidth;
        var fontsizetitle = 25;
        var newFontSizeTitle = Math.floor(fontsizetitle * percentage);
        $(".divclass").css("font-size", newFontSizeTitle)
    }
    
    console.log('respondText init');
    
}

function navClick() {
    $(window).load(function(){  
        
        var navHeightBind = $('#header_outer').outerHeight();
        
        $('a, #section1-btn').bind('click',function(event){
            var $anchor = $(this);
            $('html, body').stop().animate({
                scrollTop: $($anchor.attr('href')).offset().top - navHeightBind
            }, 1500,'easeInOutExpo');
            event.preventDefault();
            console.log('click');
        });
    });
    
    console.log('navClick init');
    
}

function wowInit() {
    
    wow = new WOW(
      {
        animateClass: 'animated',
        offset:       100
      }
    );
    wow.init();
    
    $(function () {
        var headline1 = $('#headline1');
        var headline2 = $('#headline2');
        var headline3 = $('#headline3');
        function fadeInOut () {
            
            headline1.delay(500).queue(function(next) {
                  $(this).show();
                  //console.log(this);
                  next();                    
                
                headline1.delay(7000).queue(function(next) {
                    
                    $(this).hide();
                    //console.log(this);
                    next();

                    headline2.delay(500).queue(function(next) {
                        
                        $(this).show();
                        //console.log(this);
                        next();

                        headline2.delay(7000).queue(function(next) {
                            
                            $(this).hide();
                            //console.log(this);
                            next();

                            headline3.delay(500).queue(function(next) {
                                
                                $(this).show();
                                //console.log(this);
                                next();

                                headline3.delay(7000).queue(function(next) {
                                    
                                    $(this).hide();
                                    //console.log(this);
                                    next();

                                    setTimeout(fadeInOut, 0);

                                 });

                            });

                        });
                    });
                });
            });
        }

        fadeInOut();
    });
    
    console.log('wow init');
    
}

function swiperDesktopInit() {
 
    $(document).ready(function () {
        //initialize swiper when document ready  
        var swiperCG = new Swiper ('#swiper-CG', {
            // Optional parameters
            slidesPerView: 2,
            slidesPerGroup: 2,
            pagination: '.swiper-pagination',
            paginationClickable: '.swiper-pagination',
            nextButton: '.swiper-button-next',
            prevButton: '.swiper-button-prev',
            spaceBetween: 30
        })        
    });
    
    var s2BSwiperHeight = $('#s2BSwiper').height();
    $('#s2BSwiper .col-md-1').height(s2BSwiperHeight);
    
    console.log('desktop swiper init');
    
}

function swiperMobileInit() {
    
    $(document).ready(function () {
        //initialize swiper when document ready  
        var swiperCG = new Swiper ('#swiper-CG', {
            // Optional parameters
            slidesPerView: 'auto',
            pagination: '.swiper-pagination',
            paginationClickable: '.swiper-pagination',
            spaceBetween: 10
        })        
    });
    
    console.log('mobile swiper init');
    
}

function videoBG() {
    $(document).ready(function () {
        
        $("#section1").vide({
            mp4: 'http://a1135.g.akamai.net/f/1135/24935/1h/cchannel.download.akamai.com/24935/43kix/ihm/ihm-fa-lp.mp4',
            webm: 'http://a1135.g.akamai.net/f/1135/24935/1h/cchannel.download.akamai.com/24935/43kix/ihm/ihm-fa-lp.webm',
            ogv: 'http://a1135.g.akamai.net/f/1135/24935/1h/cchannel.download.akamai.com/24935/43kix/ihm/ihm-fa-lp.ogv',
            poster: '_/img/new/video-poster.jpg'},
        {
            volume: 0,
            playbackRate: 1,
            muted: true,
            loop: true,
            autoplay: true,
            position: "50% 50%", // Similar to the CSS `background-position` property.
            posterType: "jpg", // Poster image type. "detect" — auto-detection; "none" — no poster; "jpg", "png", "gif",... - extensions.
            resizing: true // Auto-resizing, read: https://github.com/VodkaBears/Vide#resizing
        });
        
    });
        
    console.log('videoBG init');
    
}

function watchVBtn() {
 
    $('#watch-vid-1').on('click', function() {
        
        $('#video-container').html('<iframe src="https://player.vimeo.com/video/122694958?title=0&byline=0&portrait=0" width="100%" height="100%" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe> <p>BBDO3 12.18.14 from <a href="https://vimeo.com/iheartmedianyc">iHeartMedia</a> on <a href="https://vimeo.com">Vimeo</a>.</p>');
        
    });
    
    console.log('Vimeo button init');
    
}

function shuffle() {

    $(document).ready(function () {
        /* initialize shuffle plugin */
        var $grid = $('#grid');

        $grid.shuffle({
            itemSelector: '.portfolio-item' // the selector for the items in the grid
        });

        $('.filter-options button').click(function (e) {
            e.preventDefault();

            // set active class
            $('.filter-options button').removeClass('active');
            $(this).addClass('active');

            // get group name from clicked item
            var groupName = $(this).attr('data-group');

            // reshuffle grid
            $grid.shuffle('shuffle', groupName );
        });
        
    });
    
    console.log('shuffle grid init');
    
}

function offerButton() {
$(document).ready(function () {
    
        $('#fo-1').hover(
          function() {
            $('#fo-1-1').removeClass("hidden").addClass( "visible" );
          }, function() {
                $('#fo-1-1').removeClass("visible").addClass("visible");
          }
        );
    
    $('#fo-2').hover(
      function() {
          $('#fo-1-1').removeClass("visible").addClass("hidden");
          $('#fo-2-1').removeClass("hidden").addClass( "visible" );
      }, function() {
        $('#fo-2-1').removeClass("visible").addClass("hidden");
          $('#fo-1-1').removeClass("hidden").addClass( "visible" );
      }
    );
    
    $('#fo-3').hover(
      function() {
          $('#fo-1-1').removeClass("visible").addClass("hidden");
          $('#fo-3-1').removeClass("hidden").addClass( "visible" );
      }, function() {
        $('#fo-3-1').removeClass("visible").addClass("hidden");
          $('#fo-1-1').removeClass("hidden").addClass( "visible" );
      }
    );
    
    $('#fo-4').hover(
      function() {
          $('#fo-1-1').removeClass("visible").addClass("hidden");
          $('#fo-4-1').removeClass("hidden").addClass( "visible" );
      }, function() {
        $('#fo-4-1').removeClass("visible").addClass("hidden");
          $('#fo-1-1').removeClass("hidden").addClass( "visible" );
      }
    );
    
    $('#fo-5').hover(
      function() {
          $('#fo-1-1').removeClass("visible").addClass("hidden");
          $('#fo-5-1').removeClass("hidden").addClass( "visible" );
      }, function() {
        $('#fo-5-1').removeClass("visible").addClass("hidden");
          $('#fo-1-1').removeClass("hidden").addClass( "visible" );
      }
    );
    
    $('#fo-6').hover(
      function() {
          $('#fo-1-1').removeClass("visible").addClass("hidden");
          $('#fo-6-1').removeClass("hidden").addClass( "visible" );
      }, function() {
        $('#fo-6-1').removeClass("visible").addClass("hidden");
          $('#fo-1-1').removeClass("hidden").addClass( "visible" );
      }
    );
    
});
    
    console.log('offer hover init');
    
}

function mapFlip() {
    $(document).ready(function () {
        $('#map-flip').hover(
          function() {
              this.src = '_/img/new/section2-map.png';
              //console.log(this);
          }, function() {
            this.src = '_/img/new/map-national.png';
              //console.log(this);
          }
        );

    });
    
    console.log('map flip init');

}

function modalOverlays() {
 
    (function() {
        var triggerBttn = document.getElementById( 'trigger-overlay-1' ),
            overlay = document.querySelector( 'div.overlay' ),
            closeBttn = overlay.querySelector( 'button.overlay-close' );
            transEndEventNames = {
                'WebkitTransition': 'webkitTransitionEnd',
                'MozTransition': 'transitionend',
                'OTransition': 'oTransitionEnd',
                'msTransition': 'MSTransitionEnd',
                'transition': 'transitionend'
            },
            transEndEventName = transEndEventNames[ Modernizr.prefixed( 'transition' ) ],
            support = { transitions : Modernizr.csstransitions };

        function toggleOverlay() {
            if( classie.has( overlay, 'open' ) ) {
                classie.remove( overlay, 'open' );
                classie.add( overlay, 'close' );
                var onEndTransitionFn = function( ev ) {
                    $('#header_outer').show();
                    if( support.transitions ) {
                        if( ev.propertyName !== 'visibility' ) return;
                        this.removeEventListener( transEndEventName, onEndTransitionFn );
                    }
                    classie.remove( overlay, 'close' );
                };
                if( support.transitions ) {
                    overlay.addEventListener( transEndEventName, onEndTransitionFn );
                }
                else {
                    onEndTransitionFn();
                }
            }
            else if( !classie.has( overlay, 'close' ) ) {
                $('#header_outer').hide();
                classie.add( overlay, 'open' );
            }
        }

        triggerBttn.addEventListener( 'click', toggleOverlay );
        closeBttn.addEventListener( 'click', toggleOverlay );
    })();
    
    console.log('modal overlay init');
    
}

/*function insightChart1() {
    
    $(document).ready(function () {
 
        function drawChart() {
                var data = new google.visualization.DataTable();
                data.addColumn('string', 'Name');
                data.addColumn('number', 'Value');
                data.addColumn({type: 'string', role: 'style'});
                data.addColumn({type: 'string', role: 'annotation'});
                data.addRows([
                    ['iHeartMedia', 245, 'color: #c6002b', '245'],
                    ['CBS', 173, 'color: #d6d6d6', '173'],
                    ['FOX', 173, 'color: #d6d6d6', '173'],
                    ['NBC', 171, 'color: #d6d6d6', '171'],
                    ['ABC', 160, 'color: #d6d6d6', '160']
                ]);

                var chart = new google.visualization.ColumnChart(document.querySelector('#insightChart1'));
                chart.draw(data, {
                    legend: {
                        position: 'none'
                    },
                    backgroundColor: '#F2F2F2',
                    enableInteractivity: false,
                    vAxis: {
                       textPosition: 'none',
                       gridlines: {
                            color: 'transparent'
                        }
                    },
                    annotations: {
                        textStyle: {
                          fontName: 'Open Sans',
                          fontSize: 24,
                          bold: true,
                          italic: false,
                          color: '#F2F2F2'
                        }
                    }
                });
            }
            google.load('visualization', '1', {packages:['corechart'], callback: drawChart});
                
    });
    
    console.log('Insight chart 1 init');
    
}*///# sourceMappingURL=app.min.js.map